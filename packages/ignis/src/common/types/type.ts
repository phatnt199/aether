import { ValueOrPromise } from './basic';

// ----------------------------------------------------------------------------------------------------------------------------------------
// Domain Types
// ----------------------------------------------------------------------------------------------------------------------------------------
export type TBullQueueRole = 'queue' | 'worker';

export type TPermissionEffect = 'allow' | 'deny';

// ----------------------------------------------------------------------------------------------------------------------------------------
// Environment Interface
// ----------------------------------------------------------------------------------------------------------------------------------------
export interface IApplicationEnvironment {
  get<ReturnType>(key: string): ReturnType;
  set<ValueType>(key: string, value: ValueType): any;
}

// ----------------------------------------------------------------------------------------------------------------------------------------
// Error Interface
// ----------------------------------------------------------------------------------------------------------------------------------------
export interface IError<StatusCode extends number = number> extends Error {
  statusCode: StatusCode;
  messageCode?: string;
  message: string;
  [key: string]: any;
}

// ----------------------------------------------------------------------------------------------------------------------------------------
// Request Interface
// ----------------------------------------------------------------------------------------------------------------------------------------
export interface IRequestedRemark {
  id: string;
  url: string;
  method: string;
  [extra: string | symbol]: any;
}

// ----------------------------------------------------------------------------------------------------------------------------------------
// Injection Getter
// ----------------------------------------------------------------------------------------------------------------------------------------
export type TInjectionGetter = <T>(key: string | symbol) => T;

// ----------------------------------------------------------------------------------------------------------------------------------------
// Provider
// ----------------------------------------------------------------------------------------------------------------------------------------
export interface IProvider<T> {
  value(): ValueOrPromise<T>;
}
